--PUBLIKATIONSLISTA
SELECT DISTINCT isi.py, d.sv_name, isi.au, isi.ti, isi.so, isi.vl, isi.iss
FROM isi_full AS isi
INNER JOIN cross_isi_cpl AS cic ON isi.isi_id = cic.isi_id
INNER JOIN uplmain aS c ON cic.cpl_pubid = c.pubid
INNER JOIN person_publ AS pp ON c.dbid = pp.dbid
INNER JOIN dept_pers_publ AS dpp ON pp.pd_id = dpp.pd_id
INNER JOIN departments AS d ON dpp.deptid = d.deptid
INNER JOIN dept_instance AS di ON d.deptid = di.deptid
INNER JOIN instance AS ins ON di.instanceid = ins.instanceid
INNER JOIN cooperations as coop ON isi.isi_id = coop.isi_id
AND (sf='x' OR uf='x') --Industrisamarbeten
AND ins.instanceid = 1 --Endast Chalmerspublikationer
AND coop.py between 2011 AND 2015 --Ändra till aktuella år
AND (d.deptid = 46 OR d.parentid = 46 OR d.grandparentid = 46) --Ändra till aktuell institution
ORDER BY isi.py, d.sv_name



--PUBLIKATIONER PER AVDELNING
SELECT d.sv_name, COUNT(distinct isi.isi_id)
FROM isi_full AS isi
INNER JOIN cross_isi_cpl AS cic ON isi.isi_id = cic.isi_id
INNER JOIN uplmain aS c ON cic.cpl_pubid = c.pubid
INNER JOIN person_publ AS pp ON c.dbid = pp.dbid
INNER JOIN dept_pers_publ AS dpp ON pp.pd_id = dpp.pd_id
INNER JOIN departments AS d ON dpp.deptid = d.deptid
INNER JOIN dept_instance AS di ON d.deptid = di.deptid
INNER JOIN instance AS ins ON di.instanceid = ins.instanceid
INNER JOIN cooperations as coop ON isi.isi_id = coop.isi_id
AND (coop.sf = 'x' OR coop.uf = 'x') --Industrisamarbeten
AND ins.instanceid = 1 --Endast Chalmerspublikationer
AND coop.py between 2011 AND 2015 --Ändra till aktuella år
AND (d.deptid = 46 OR d.parentid = 46 OR d.grandparentid = 46) --Ändra till aktuell institution
GROUP BY d.sv_name
ORDER BY d.sv_name



--PUBLIKATIONER PER ÅR
SELECT isi.py, COUNT(distinct isi.isi_id)
FROM isi_full AS isi
INNER JOIN cross_isi_cpl AS cic ON isi.isi_id = cic.isi_id
INNER JOIN uplmain aS c ON cic.cpl_pubid = c.pubid
INNER JOIN person_publ AS pp ON c.dbid = pp.dbid
INNER JOIN dept_pers_publ AS dpp ON pp.pd_id = dpp.pd_id
INNER JOIN departments AS d ON dpp.deptid = d.deptid
INNER JOIN dept_instance AS di ON d.deptid = di.deptid
INNER JOIN instance AS ins ON di.instanceid = ins.instanceid
INNER JOIN cooperations as coop ON isi.isi_id = coop.isi_id
AND (coop.sf = 'x' OR coop.uf = 'x') --Industrisamarbeten
AND ins.instanceid = 1 --Endast Chalmerspublikationer
AND coop.py between 2011 AND 2015 --Ändra till aktuella år
AND (d.deptid = 46 OR d.parentid = 46 OR d.grandparentid = 46) --Ändra till aktuell institution
group by isi.py
ORDER BY isi.py